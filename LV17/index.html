<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <title>BMI kalkulator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6f8;
            padding: 40px;
        }

        .container {
            max-width: 400px;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            margin: auto;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
        }

        label {
            display: block;
            margin-top: 15px;
        }

        input[type="number"] {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
        }

        .units {
            margin-top: 10px;
        }

        button {
            margin-top: 20px;
            padding: 10px;
            width: 100%;
            cursor: pointer;
        }

        .error {
            color: red;
            font-size: 0.9em;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            display: none;
        }

        .normal { background-color: #d4edda; }
        .under { background-color: #cce5ff; }
        .over { background-color: #fff3cd; }
        .obese { background-color: #f8d7da; }
    </style>
</head>
<body>

<div class="container">
    <h1>BMI kalkulator</h1>
    <p>BMI (Body Mass Index) je pokazatelj odnosa tjelesne mase i visine.</p>

    <label>Visina:</label>
    <input type="number" id="height" placeholder="Unesi visinu">
    <div class="units">
        <label><input type="radio" name="unit" value="cm" checked> cm</label>
        <label><input type="radio" name="unit" value="m"> m</label>
    </div>
    <div id="heightError" class="error"></div>

    <label>Masa (kg):</label>
    <input type="number" id="weight" placeholder="Unesi masu">
    <div id="weightError" class="error"></div>

    <button onclick="calculateBMI()">Izračunaj</button>
    <button onclick="resetForm()">Reset</button>

    <div id="result" class="result"></div>
</div>

<script>
    const resultDiv = document.getElementById("result");

    function calculateBMI() {
        const heightInput = document.getElementById("height").value;
        const weightInput = document.getElementById("weight").value;
        const unit = document.querySelector('input[name="unit"]:checked').value;

        document.getElementById("heightError").textContent = "";
        document.getElementById("weightError").textContent = "";
        resultDiv.style.display = "none";

        let valid = true;

        if (!heightInput || heightInput <= 0) {
            document.getElementById("heightError").textContent = "Unesi ispravnu visinu.";
            valid = false;
        }

        if (!weightInput || weightInput <= 0) {
            document.getElementById("weightError").textContent = "Unesi ispravnu masu.";
            valid = false;
        }

        if (!valid) return;

        let height = parseFloat(heightInput);
        let weight = parseFloat(weightInput);

        if (unit === "cm") {
            height = height / 100;
        }

        const bmi = weight / (height * height);
        const bmiRounded = bmi.toFixed(1);

        let category = "";
        let message = "";
        let className = "";

        if (bmi < 18.5) {
            category = "Pothranjenost";
            message = "Vrijedi pripaziti na prehranu.";
            className = "under";
        } else if (bmi < 25) {
            category = "Normalna tjelesna masa";
            message = "Bravo! Nastavi s dobrim navikama.";
            className = "normal";
        } else if (bmi < 30) {
            category = "Prekomjerna tjelesna masa";
            message = "Mala prilagodba navika može puno pomoći.";
            className = "over";
        } else {
            category = "Pretilost";
            message = "Razmisli o zdravijem načinu života.";
            className = "obese";
        }

        resultDiv.className = "result " + className;
        resultDiv.innerHTML = `
            <strong>BMI:</strong> ${bmiRounded}<br>
            <strong>Kategorija:</strong> ${category}<br>
            <em>${message}</em>
        `;
        resultDiv.style.display = "block";

        localStorage.setItem("lastBMI", resultDiv.innerHTML);
        localStorage.setItem("lastClass", className);
    }

    function resetForm() {
        document.getElementById("height").value = "";
        document.getElementById("weight").value = "";
        document.getElementById("heightError").textContent = "";
        document.getElementById("weightError").textContent = "";
        resultDiv.style.display = "none";
        localStorage.removeItem("lastBMI");
        localStorage.removeItem("lastClass");
    }

    window.onload = function () {
        const savedResult = localStorage.getItem("lastBMI");
        const savedClass = localStorage.getItem("lastClass");

        if (savedResult && savedClass) {
            resultDiv.innerHTML = savedResult;
            resultDiv.className = "result " + savedClass;
            resultDiv.style.display = "block";
        }
    };
</script>

</body>
</html>
